{
  "version": "2.0.0",
  "status": "active",
  "lastUpdated": "2026-01-23T00:00:00Z",
  "projectName": "Forge",
  "description": "A personal project brainstorming, planning, and tracking tool for complex hardware and engineering projects.",
  "metadata": {
    "source": "SPRINT_PLAN.md",
    "generatedFrom": "sprint-plan",
    "availableTools": {
      "testing": ["playwright", "vitest", "react-testing-library"],
      "backend": ["supabase"],
      "codeAnalysis": ["serena", "pr-review-toolkit"],
      "design": [
        "frontend-design",
        "rams",
        "ui-skills",
        "web-interface-guidelines"
      ]
    }
  },
  "objectives": [
    {
      "id": "obj-0",
      "sprint": 0,
      "title": "Project Infrastructure & Tooling",
      "description": "Establish development environment with CI/CD, testing, and core tooling",
      "demoGoal": "Running dev server with base layout, all CI checks passing"
    },
    {
      "id": "obj-1",
      "sprint": 1,
      "title": "Data Model & File System Foundation",
      "description": "Define TypeScript types, implement file parsing/serialization, create file system abstraction",
      "demoGoal": "Load sample project folder, display parsed nodes as JSON in UI"
    },
    {
      "id": "obj-2",
      "sprint": 2,
      "title": "Node CRUD & Basic Editor",
      "description": "Create, read, update, delete nodes through UI with markdown editing",
      "demoGoal": "Create a new Task node, edit content, see it persist and reload"
    },
    {
      "id": "obj-3",
      "sprint": 3,
      "title": "Outline View & Navigation",
      "description": "Hierarchical outline view with filtering, sorting, and keyboard navigation",
      "demoGoal": "Browse project in outline, filter by type/tag, collapse/expand sections"
    },
    {
      "id": "obj-4",
      "sprint": 4,
      "title": "Wiki-Links & Backlinks",
      "description": "Full wiki-link support with autocomplete, navigation, and backlinks",
      "demoGoal": "Type [[, see suggestions, click link to navigate, view backlinks panel"
    },
    {
      "id": "obj-5",
      "sprint": 5,
      "title": "Graph View Foundation",
      "description": "Interactive graph visualization with nodes and edges",
      "demoGoal": "View project as graph, pan/zoom, click nodes, see link connections"
    },
    {
      "id": "obj-6",
      "sprint": 6,
      "title": "DAG Dependencies & Critical Path",
      "description": "Full dependency tracking with blocking logic and critical path highlighting",
      "demoGoal": "Create task dependencies, see blocked status propagate, highlight critical path"
    },
    {
      "id": "obj-7",
      "sprint": 7,
      "title": "Decision Node Tools",
      "description": "Full decision workflow with comparison tables, scoring, and implications",
      "demoGoal": "Create decision, add options, score criteria, select winner, see implications"
    },
    {
      "id": "obj-8",
      "sprint": 8,
      "title": "Import & Export",
      "description": "Full import/export for Markdown, JSON, and CSV formats",
      "demoGoal": "Export project as JSON, re-import, export components as CSV BOM"
    },
    {
      "id": "obj-9",
      "sprint": 9,
      "title": "Command Palette & Search",
      "description": "Command palette for quick actions and global full-text search",
      "demoGoal": "Press Cmd+K, search for node, execute action, navigate instantly"
    },
    {
      "id": "obj-10",
      "sprint": 10,
      "title": "Polish & Accessibility Audit",
      "description": "Production-ready UI with full WCAG 2.1 compliance",
      "demoGoal": "Pass accessibility audit, demonstrate with screen reader"
    },
    {
      "id": "obj-11",
      "sprint": 11,
      "title": "Workspace Management & Git Integration",
      "description": "Multi-project workspace and optional git integration",
      "demoGoal": "Switch between projects, see git status, auto-commit on save"
    },
    {
      "id": "obj-12",
      "sprint": 12,
      "title": "Home Assistant Deployment",
      "description": "Deploy Forge as a Home Assistant add-on accessible via existing Tailscale VPN with persistent storage",
      "demoGoal": "Access Forge from MacBook or iPhone via Tailscale, data persists on Home Assistant Green"
    },
    {
      "id": "obj-13",
      "sprint": 13,
      "title": "Container Node Types (Subsystem, Assembly, Module)",
      "description": "Add three new node types for organizing large-scale project parts. Subsystems, Assemblies, and Modules act as logical containers that other nodes can be linked to via a parent field.",
      "demoGoal": "Create a Subsystem for 'Cannon', link tasks and components to it, filter view by container"
    },
    {
      "id": "obj-14",
      "sprint": 14,
      "title": "Hybrid Persistence Layer (IndexedDB + File System Sync)",
      "description": "Implement IndexedDB as primary storage for instant persistence across page reloads, with bidirectional sync to the file system. Users can work offline with automatic reconnection to their project directory.",
      "demoGoal": "Close browser, reopen, see all data instantly without re-selecting folder. Make external edit to .md file, see it sync into app."
    },
    {
      "id": "obj-15",
      "sprint": 15,
      "title": "Component Sourcing, Attachments, Quick Capture & Kanban",
      "description": "Streamline component sourcing with automatic data import from supplier links, image and PDF attachments, quick capture for fast note-taking, Kanban view for task management, and an MCP server for AI agent integration.",
      "demoGoal": "Paste DigiKey link, see component auto-populate with specs. Attach photos and datasheets. Hit Cmd+Shift+N to quick-capture an idea. View tasks in Kanban board by status."
    },
    {
      "id": "obj-16",
      "sprint": 16,
      "title": "Supplier API Integrations & Scrapers",
      "description": "Full supplier integration with DigiKey and Mouser APIs for real-time part data, plus scrapers for Adafruit, LCSC, and Amazon. Includes proxy server infrastructure to handle CORS and API credentials management.",
      "demoGoal": "Paste DigiKey link, see full product data including price, stock, datasheet URL auto-populated. Configure API keys in settings. Works with Mouser, Adafruit, LCSC links too."
    }
  ],
  "tasks": [
    {
      "id": "0.1",
      "sprint": 0,
      "title": "React + TypeScript Project Setup",
      "description": "Initialize Vite + React 18 + TypeScript with strict mode, path aliases, and environment configuration",
      "acceptanceCriteria": [
        "npm run build succeeds with zero errors",
        "strict: true and noImplicitAny: true in tsconfig.json",
        "Imports using @ prefix resolve correctly (@/components, @/lib, @/types)",
        ".env.example exists with documented variables",
        "Env variables accessible via import.meta.env",
        "config.ts provides typed config access"
      ]
    },
    {
      "id": "0.2",
      "sprint": 0,
      "title": "Tailwind CSS Configuration",
      "description": "Install and configure Tailwind CSS v3+ with animations and utility functions",
      "acceptanceCriteria": [
        "Tailwind classes apply correctly",
        "Content paths include all component files",
        "tailwindcss-animate animation classes available",
        "cn() utility function merges conflicting classes correctly (unit tested)"
      ]
    },
    {
      "id": "0.3",
      "sprint": 0,
      "title": "Testing Infrastructure",
      "description": "Set up Vitest + React Testing Library with coverage reporting",
      "acceptanceCriteria": [
        "npm test command runs Vitest",
        "RTL matchers available in tests",
        "Coverage report generated on test run (target: 80%+)",
        "Smoke test passes (App renders without crash)"
      ]
    },
    {
      "id": "0.4",
      "sprint": 0,
      "title": "Linting & Formatting",
      "description": "Configure ESLint + Prettier with pre-commit hooks",
      "acceptanceCriteria": [
        "npm run lint command available",
        "eslint-plugin-jsx-a11y rules active",
        "React hooks rules configured (exhaustive deps)",
        "Tailwind classes auto-sorted on format",
        "Pre-commit hook runs lint and format via Husky + lint-staged",
        ".vscode/settings.json configured for format-on-save"
      ]
    },
    {
      "id": "0.5",
      "sprint": 0,
      "title": "CI Pipeline",
      "description": "GitHub Actions workflow for lint, type-check, test, build",
      "acceptanceCriteria": [
        "CI workflow file exists at .github/workflows/ci.yml",
        "All CI steps run on every PR",
        "node_modules cached for faster CI runs"
      ]
    },
    {
      "id": "0.6",
      "sprint": 0,
      "title": "Base Layout Shell",
      "description": "Create AppShell with sidebar, main content, and accessibility features",
      "tools": ["frontend-design", "ui-skills", "rams"],
      "acceptanceCriteria": [
        "AppShell renders with two-column layout (sidebar + main)",
        "Skip link receives focus on Tab and activates with Enter",
        "Layout uses h-dvh (dynamic viewport height)",
        "Semantic landmarks used: <nav>, <main>, <aside>"
      ]
    },
    {
      "id": "0.7",
      "sprint": 0,
      "title": "Base UI Integration",
      "description": "Install and configure Base UI components with styling wrapper",
      "tools": ["ui-skills", "playwright"],
      "acceptanceCriteria": [
        "Base UI installed with pinned version",
        "Styling wrapper applies consistent Tailwind styling",
        "Usage examples documented in component files",
        "Dialog component opens and closes correctly (tested)"
      ]
    },
    {
      "id": "0.8",
      "sprint": 0,
      "title": "State Management",
      "description": "Set up Zustand store with devtools middleware",
      "acceptanceCriteria": [
        "Zustand package installed",
        "Root store initializes with devtools visible",
        "TypeScript types defined for store state and actions"
      ]
    },
    {
      "id": "0.9",
      "sprint": 0,
      "title": "Error Handling",
      "description": "Create error boundaries with fallback UI",
      "acceptanceCriteria": [
        "ErrorBoundary catches render errors and displays fallback",
        "Errors logged to console with stack trace",
        "Major app sections wrapped (sidebar, main, editor)"
      ]
    },
    {
      "id": "0.10",
      "sprint": 0,
      "title": "Toast Notifications",
      "description": "Toast system with variants and auto-dismiss",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "ToastProvider context provides value",
        "useToast() hook returns toast functions",
        "Success, error, info, undo variants styled distinctly",
        "Toast auto-dismisses after configurable timeout"
      ]
    },
    {
      "id": "0.11",
      "sprint": 0,
      "title": "Utility Functions",
      "description": "Create debug logging and z-index scale utilities",
      "acceptanceCriteria": [
        "debug('namespace') utility with localStorage toggle",
        "z-index.ts exports Z_DROPDOWN=10, Z_STICKY=20, Z_MODAL=30, Z_POPOVER=40, Z_TOAST=50, Z_TOOLTIP=60",
        "formatDate() using Intl.DateTimeFormat",
        "formatRelativeTime() for '2 hours ago' style formatting"
      ]
    },
    {
      "id": "1.1",
      "sprint": 1,
      "title": "Node Type System",
      "description": "Define TypeScript types for Decision, Component, Task, Note nodes with type guards",
      "acceptanceCriteria": [
        "NodeType enum: decision, component, task, note",
        "BaseNode interface with id, type, title, tags, dates, content",
        "DecisionNode extends BaseNode with status, selected, options, criteria",
        "ComponentNode extends BaseNode with status, cost, supplier, partNumber, customFields",
        "TaskNode extends BaseNode with status, priority, dependsOn, blocks, checklist",
        "NoteNode extends BaseNode (minimal additions)",
        "Type guards: isDecisionNode(), isComponentNode(), isTaskNode(), isNoteNode()",
        "ForgeNode discriminated union narrows correctly with type guards"
      ]
    },
    {
      "id": "1.2",
      "sprint": 1,
      "title": "Project & Workspace Types",
      "description": "Define Project and Workspace interfaces with metadata",
      "acceptanceCriteria": [
        "Project interface with id, name, path, nodes, metadata",
        "Workspace interface with projects, activeProjectId, config",
        "WorkspaceConfig interface defined"
      ]
    },
    {
      "id": "1.3",
      "sprint": 1,
      "title": "YAML Frontmatter Parsing & Serialization",
      "description": "Parse and serialize YAML frontmatter with gray-matter, including wiki-link extraction",
      "acceptanceCriteria": [
        "gray-matter installed with safe YAML config",
        "parseFrontmatter(content) returns { data, content, error }",
        "Handles edge cases: no frontmatter, malformed YAML, empty file",
        "serializeFrontmatter(node) preserves field ordering (type first, then status)",
        "Round-trip parse/serialize produces identical data (tested)",
        "parseMarkdownBody(content) extracts title from first # heading",
        "extractWikiLinks(markdown) uses regex /\\[\\[([^\\]]+)\\]\\]/g",
        "Wiki-links inside code blocks and inline code are ignored",
        "Tests pass for parsing all four node type samples"
      ]
    },
    {
      "id": "1.4",
      "sprint": 1,
      "title": "Runtime Validation with Zod",
      "description": "Create Zod schemas for node type validation",
      "acceptanceCriteria": [
        "zod package installed",
        "Zod schema defined for each node type frontmatter",
        "validateNode(data) returns Result<ForgeNode, ValidationError> with detailed error messages"
      ]
    },
    {
      "id": "1.5",
      "sprint": 1,
      "title": "File System Abstraction",
      "description": "Create adapter pattern for browser and memory file systems",
      "acceptanceCriteria": [
        "FileSystemAdapter interface: readFile, writeFile, listDirectory, exists, mkdir, watch",
        "MemoryFileSystemAdapter implements CRUD operations for tests",
        "BrowserFileSystemAdapter uses File System Access API with permission handling",
        "Directory handles cached for performance",
        "Fallback using <input type='file' webkitdirectory> works in Firefox/Safari",
        "watch() method detects external file changes",
        "Rapid changes debounced (100ms)"
      ]
    },
    {
      "id": "1.6",
      "sprint": 1,
      "title": "Project Loading & Saving",
      "description": "Load projects from directory structure and save nodes",
      "acceptanceCriteria": [
        "loadProject(adapter, path) scans decisions/, components/, tasks/, notes/",
        "Builds nodes Map with correct types",
        "Load mock project verifies node count and types",
        "saveNode(adapter, projectPath, node) determines subdirectory from node type",
        "Filenames generated via slugify (URL-safe)",
        "fixtures/sample-project/ contains at least 2 nodes of each type with cross-node links",
        "<DebugProjectView> shows node count by type, parse errors, collapsible sections"
      ]
    },
    {
      "id": "2.1",
      "sprint": 2,
      "title": "Nodes Store",
      "description": "Zustand store for node CRUD operations with project integration",
      "acceptanceCriteria": [
        "useNodesStore with nodes Map and activeNodeId",
        "Actions: addNode, updateNode, deleteNode, setActiveNode",
        "Selectors: getNodeById, getNodesByType, getAllNodes",
        "generateNodeId(title, type) slugifies and ensures uniqueness",
        "useProjectStore with project, isDirty, isLoading, error",
        "Project store integrates with file system adapter for save/load"
      ]
    },
    {
      "id": "2.2",
      "sprint": 2,
      "title": "Undo/Redo System",
      "description": "Action history with keyboard shortcuts",
      "acceptanceCriteria": [
        "Undo stack records action history",
        "Zustand middleware intercepts store actions",
        "Undo/redo works for node create, update, delete",
        "Ctrl/Cmd+Z triggers undo, Ctrl/Cmd+Shift+Z triggers redo"
      ]
    },
    {
      "id": "2.3",
      "sprint": 2,
      "title": "Sidebar Navigation",
      "description": "Sidebar with project switcher, filters, tag cloud, and quick create buttons",
      "tools": ["frontend-design", "ui-skills", "web-interface-guidelines"],
      "acceptanceCriteria": [
        "Sidebar renders with project switcher, quick create, filters, tag cloud sections",
        "Sidebar collapses at mobile breakpoint",
        "+ Decision, + Component, + Task, + Note quick create buttons"
      ]
    },
    {
      "id": "2.4",
      "sprint": 2,
      "title": "Node List View",
      "description": "Keyboard-navigable node list with icons and badges",
      "tools": ["frontend-design", "rams"],
      "acceptanceCriteria": [
        "NodeList displays type icon, title, status badge",
        "Active node visually distinct",
        "Arrow keys, Enter for keyboard navigation",
        "NodeTypeIcon shows correct lucide-react icon per type with aria-hidden",
        "StatusBadge shows color + text (not color-only)",
        "EmptyState component with single CTA renders when no nodes"
      ]
    },
    {
      "id": "2.5",
      "sprint": 2,
      "title": "Markdown Editor",
      "description": "CodeMirror-based markdown editing with syntax highlighting",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "CodeMirror packages installed (@codemirror/state, view, lang-markdown, @uiw/react-codemirror)",
        "MarkdownEditor wrapper component renders, value changes trigger onChange",
        "Markdown syntax highlighted",
        "Editor theme consistent with app"
      ]
    },
    {
      "id": "2.6",
      "sprint": 2,
      "title": "Node Detail Panel",
      "description": "Slide-out panel for node editing with frontmatter fields",
      "tools": ["frontend-design", "ui-skills", "rams"],
      "acceptanceCriteria": [
        "NodeDetailPanel renders as slide-out or split view",
        "Close button works, Escape key closes panel",
        "overscroll-behavior: contain prevents scroll bleed",
        "Focus trapped when panel open, returns on close",
        "NodeTitleEditor with large heading input, auto-focus on new node",
        "StatusSelect using Base UI Select, keyboard accessible",
        "TagInput with autocomplete, Enter to add, backspace to remove",
        "PrioritySelector as segmented control (High/Medium/Low)",
        "FrontmatterEditor renders appropriate fields based on node type",
        "Decision fields: selected option, status",
        "Component fields: cost, supplier, part number, custom key-value fields",
        "Task fields: priority, depends-on",
        "Checklist parser for - [ ] and - [x] syntax",
        "ChecklistEditor: Space to toggle, Enter to add, backspace to delete"
      ]
    },
    {
      "id": "2.7",
      "sprint": 2,
      "title": "Node Creation Dialog",
      "description": "Dialog for creating new nodes with type selection",
      "tools": ["frontend-design", "ui-skills"],
      "acceptanceCriteria": [
        "CreateNodeDialog with type selector, title input, template dropdown",
        "Ctrl+Shift+N opens create dialog"
      ]
    },
    {
      "id": "2.8",
      "sprint": 2,
      "title": "Node Deletion & Auto-Save",
      "description": "Delete confirmation and debounced auto-save with dirty tracking",
      "acceptanceCriteria": [
        "DeleteNodeDialog shows title, type, warns about broken links",
        "Undo toast appears after deletion, restores node",
        "Dirty state tracked per node",
        "Debounced auto-save (2 second delay)",
        "'Saving...' indicator visible during save",
        "beforeunload handler warns when navigating with unsaved changes"
      ]
    },
    {
      "id": "3.1",
      "sprint": 3,
      "title": "Outline View",
      "description": "Hierarchical collapsible outline by node type with keyboard navigation",
      "tools": ["frontend-design", "rams"],
      "acceptanceCriteria": [
        "OutlineView with collapsible sections by node type",
        "Collapse state persists in localStorage",
        "groupNodesByType(nodes) handles empty groups",
        "CollapsibleSection animates height, Enter/Space toggle",
        "Respects prefers-reduced-motion",
        "Keyboard navigation: Arrow up/down, Enter, Home/End, type-ahead",
        "Quick status toggle on task nodes: pending -> in_progress -> complete",
        "ViewToggle switches Outline/Graph, Ctrl+1/Ctrl+2 shortcuts"
      ]
    },
    {
      "id": "3.2",
      "sprint": 3,
      "title": "Filtering System",
      "description": "Filter by type, tag, status with URL sync",
      "tools": ["frontend-design", "rams"],
      "acceptanceCriteria": [
        "nuqs v2+ installed and NuqsAdapter configured at app root",
        "TypeFilter with toggle buttons, state stored in URL",
        "TagFilter with multi-select AND logic, stored in URL",
        "StatusFilter with checkboxes, stored in URL",
        "NodeSearchInput with 150ms debounce, clear button",
        "aria-live announces result count for screen readers",
        "TagCloud shows tags with counts, click adds to filter"
      ]
    },
    {
      "id": "3.3",
      "sprint": 3,
      "title": "Sorting",
      "description": "Sort by type, status, modified, title, created",
      "acceptanceCriteria": [
        "SortDropdown with Type, Status, Modified, Title, Created options",
        "Ascending/descending toggle stored in URL",
        "sortNodes(nodes, sortBy, direction) performs stable sort"
      ]
    },
    {
      "id": "3.4",
      "sprint": 3,
      "title": "Drag and Drop Reordering",
      "description": "DnD Kit integration for custom node ordering",
      "acceptanceCriteria": [
        "@dnd-kit/core and @dnd-kit/sortable installed",
        "DnD context provider mounts without error",
        "Node list items draggable with visual feedback",
        "Custom order persists to project metadata after reload"
      ]
    },
    {
      "id": "3.5",
      "sprint": 3,
      "title": "URL-Based Navigation",
      "description": "Deep linking with nuqs for node selection and breadcrumbs",
      "tools": ["rams"],
      "acceptanceCriteria": [
        "Active node ID synced to URL (?node=id)",
        "Browser back/forward navigation works",
        "Breadcrumbs show Project > Node Type > Node, clickable segments"
      ]
    },
    {
      "id": "3.6",
      "sprint": 3,
      "title": "List Virtualization",
      "description": "Virtualize node lists for performance",
      "acceptanceCriteria": [
        "@tanstack/react-virtual installed",
        "NodeList virtualized for >50 items",
        "200+ nodes render without frame drops"
      ]
    },
    {
      "id": "4.1",
      "sprint": 4,
      "title": "Link Index",
      "description": "Bidirectional link index for outgoing and backlinks",
      "acceptanceCriteria": [
        "buildLinkIndex(nodes) returns outgoing and incoming Maps",
        "linkIndex added to nodes store, rebuilds on node changes"
      ]
    },
    {
      "id": "4.2",
      "sprint": 4,
      "title": "Wiki-Link Autocomplete",
      "description": "CodeMirror autocomplete for [[ syntax with suggestions",
      "tools": ["/rams"],
      "acceptanceCriteria": [
        "Autocomplete source filters nodes by typed text after [[",
        "Trigger on [[, insert on Enter, dismiss on Escape",
        "Auto-link suggestions for node title mentions (subtle underline, click converts)",
        "aria-live announces link inserted, navigating, result count"
      ]
    },
    {
      "id": "4.3",
      "sprint": 4,
      "title": "Clickable Links & Navigation",
      "description": "Navigate to linked nodes via Cmd+Click with preview",
      "acceptanceCriteria": [
        "CodeMirror decoration: underline, pointer cursor for [[links]]",
        "Cmd/Ctrl+Click navigates to linked node",
        "Hover preview tooltip shows title, type badge, first 100 chars",
        "'Create Linked Node' action for non-existent links prompts for type"
      ]
    },
    {
      "id": "4.4",
      "sprint": 4,
      "title": "Backlinks Panel",
      "description": "Panel showing all nodes linking to current node",
      "tools": ["/frontend-design"],
      "acceptanceCriteria": [
        "BacklinksPanel lists linking nodes with context snippet",
        "RelatedNodes shows outgoing + incoming links grouped"
      ]
    },
    {
      "id": "4.5",
      "sprint": 4,
      "title": "Link Validation",
      "description": "Detect broken links and handle renames",
      "acceptanceCriteria": [
        "Broken links styled: red, dashed underline",
        "Warning count badge in editor toolbar",
        "Link renaming dialog offers to update all references when node title changes"
      ]
    },
    {
      "id": "5.1",
      "sprint": 5,
      "title": "React Flow Integration",
      "description": "Graph view container with node selection and filtering",
      "acceptanceCriteria": [
        "reactflow package installed",
        "GraphView container renders empty graph with controls",
        "nodesToGraphData(nodes, linkIndex) returns React Flow arrays with positions",
        "Node selection synced with store (click selects, visual ring)",
        "Node positions stored in project.json, persist across reload",
        "Graph connected to same filters as outline (hide/show nodes)",
        "Node context menu: Edit, Delete, View, Add Link"
      ]
    },
    {
      "id": "5.2",
      "sprint": 5,
      "title": "Custom Graph Nodes",
      "description": "Styled graph nodes by type with badges",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "GraphNode displays title, type icon, status badge (44x44px min)",
        "Different colors per node type using Tailwind tokens",
        "Node clustering by tag with expand/collapse (optional)"
      ]
    },
    {
      "id": "5.3",
      "sprint": 5,
      "title": "Graph Edges",
      "description": "Custom edges for dependencies and references",
      "acceptanceCriteria": [
        "Dependency edge: solid line with arrow",
        "Reference edge: dashed line with circle",
        "Edge colors: blue for dependencies, gray for references"
      ]
    },
    {
      "id": "5.4",
      "sprint": 5,
      "title": "Auto Layout",
      "description": "elkjs-based hierarchical layout",
      "acceptanceCriteria": [
        "elkjs package installed",
        "calculateLayout(nodes, edges) returns valid positions respecting DAG",
        "'Reset Layout' button repositions nodes logically"
      ]
    },
    {
      "id": "5.5",
      "sprint": 5,
      "title": "Graph Navigation & Accessibility",
      "description": "Pan, zoom, minimap, keyboard navigation with screen reader support",
      "tools": ["rams"],
      "acceptanceCriteria": [
        "Mouse wheel zoom and click-drag pan work smoothly",
        "Zoom controls UI: +/-/fit buttons, fit-to-view centers all nodes",
        "Minimap toggleable, reflects graph state",
        "Keyboard navigation: Tab focus, arrow keys, Enter, Escape",
        "Screen reader support: aria-label, announce on focus",
        "Respects prefers-reduced-motion"
      ]
    },
    {
      "id": "6.1",
      "sprint": 6,
      "title": "Dependency Graph Data Structure",
      "description": "DAG data structure with cycle detection and topological sort",
      "acceptanceCriteria": [
        "DependencyGraph class with addNode, addEdge, removeNode, removeEdge, getEdges",
        "Validates DAG (rejects cyclic dependencies)",
        "wouldCreateCycle(graph, fromId, toId) uses DFS for detection",
        "topologicalSort(graph) handles disconnected subgraphs"
      ]
    },
    {
      "id": "6.2",
      "sprint": 6,
      "title": "Blocked Status & Propagation",
      "description": "Automatic blocked status calculation and cascade",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "calculateBlockedStatus(node, allNodes) checks Task complete / Decision pending",
        "Status change cascades, toast shows newly unblocked nodes",
        "BlockedIndicator tooltip lists blocking nodes, click navigates",
        "Hover 'Mark Complete' shows tooltip of nodes to unblock"
      ]
    },
    {
      "id": "6.3",
      "sprint": 6,
      "title": "Critical Path",
      "description": "Critical path calculation and visualization",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "calculateCriticalPath(nodes, graph) finds longest chain through incomplete tasks",
        "Critical path highlighted in graph view (edges and nodes), toggleable",
        "'Critical' badge shown in outline view with optional filter",
        "Dependencies visually distinct, arrow direction correct"
      ]
    },
    {
      "id": "6.4",
      "sprint": 6,
      "title": "Dependency Editor",
      "description": "UI for managing node dependencies",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "DependencyEditor with multi-select dropdown, chips, cycle prevention",
        "'Blocks' display shows nodes blocked by current node"
      ]
    },
    {
      "id": "6.5",
      "sprint": 6,
      "title": "Milestones",
      "description": "Milestone field with grouping in outline",
      "acceptanceCriteria": [
        "Optional milestone: string field on TaskNode parses/serializes",
        "MilestoneSelector dropdown with auto-complete, create new inline",
        "Milestone grouping in outline with progress indicator, collapse/expand"
      ]
    },
    {
      "id": "7.1",
      "sprint": 7,
      "title": "Comparison Table",
      "description": "Decision comparison with options and criteria",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "DecisionOption type: id, name, values: Record<criterionId, string | number>",
        "Criterion type: id, name, weight, unit",
        "ComparisonTable with rows = criteria, columns = options",
        "'Add Option' column creates new column, focuses name cell",
        "'Add Criterion' row with name input, unit dropdown, weight slider",
        "Cell editing: click to edit, Tab navigation, Escape to cancel",
        "Option deletion with confirmation, removes from all criteria",
        "Criterion deletion with confirmation"
      ]
    },
    {
      "id": "7.2",
      "sprint": 7,
      "title": "Weighted Scoring",
      "description": "Score calculation with weight sliders and visualization",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Weight slider 0-10, normalized score formula correct",
        "Score bar visualization, tabular-nums, highest highlighted"
      ]
    },
    {
      "id": "7.3",
      "sprint": 7,
      "title": "Option Selection & Status",
      "description": "Select decision winner with rationale and implications",
      "acceptanceCriteria": [
        "'Select' button updates status to selected, records option ID",
        "Selection rationale text area, auto-populated, editable",
        "Implications section parsed from ## Implications, displayed as links",
        "Decision status timeline: Created, Last Updated, Selected dates",
        "'Reopen Decision' reverts to pending, preserves history"
      ]
    },
    {
      "id": "7.4",
      "sprint": 7,
      "title": "Templates",
      "description": "Decision and node templates",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Pre-defined templates: Component Selection, Design Choice, Vendor Selection",
        "Template type: id, type, name, frontmatter, content",
        "Template manager: list, create, edit, delete, duplicate",
        "Template dropdown in CreateNodeDialog pre-fills content"
      ]
    },
    {
      "id": "8.1",
      "sprint": 8,
      "title": "JSON Export/Import",
      "description": "Full project export and import with validation",
      "acceptanceCriteria": [
        "ExportService interface with export(project, format, options)",
        "exportToJSON(project) with pretty-print, all data, export metadata",
        "importFromJSON(json) validates with zod, handles version migrations"
      ]
    },
    {
      "id": "8.2",
      "sprint": 8,
      "title": "Markdown Export/Import",
      "description": "Export to markdown file structure and import",
      "acceptanceCriteria": [
        "exportNodeToMarkdown(node) outputs frontmatter + body matching spec",
        "exportProjectToMarkdown(project) creates correct directory structure",
        "importFromMarkdown(files) parses directory, handles malformed files, merge option"
      ]
    },
    {
      "id": "8.3",
      "sprint": 8,
      "title": "CSV Export",
      "description": "Components CSV and BOM export",
      "acceptanceCriteria": [
        "exportComponentsToCSV(nodes) with proper CSV escaping, Excel-compatible",
        "exportBOM(project) outputs Bill of Materials format with summed costs"
      ]
    },
    {
      "id": "8.4",
      "sprint": 8,
      "title": "Import/Export UI",
      "description": "Dialogs for import and export with drag-drop support",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "ExportDialog with format selection, options, preview, download",
        "ImportDialog with file/folder picker, format auto-detection, conflict resolution",
        "Drag-and-drop import with drop zone overlay",
        "Clipboard import (Ctrl/Cmd+V) detects format",
        "Export progress indicator with cancellation"
      ]
    },
    {
      "id": "9.1",
      "sprint": 9,
      "title": "Command Palette",
      "description": "Cmd+K command palette with fuzzy search",
      "tools": ["/frontend-design", "/ui-skills", "web-interface-guidelines"],
      "acceptanceCriteria": [
        "CommandPalette using Base UI Dialog with input, results list, keyboard navigation",
        "useHotkey(key, callback, options) hook for Cmd+K / Ctrl+K",
        "Node search with fuzzy match, type icon, title, status; Enter navigates",
        "Fuzzy search with Levenshtein matching, highlight matched chars",
        "Recent commands: last 10, show when query empty, persist"
      ]
    },
    {
      "id": "9.2",
      "sprint": 9,
      "title": "Full-Text Search",
      "description": "Search across all node content with highlighting",
      "acceptanceCriteria": [
        "Full-text search index using minisearch, indexes titles and body",
        "Index updates on node changes",
        "Search results show context snippet with highlighted match",
        "Bold matched characters, show match location"
      ]
    },
    {
      "id": "9.3",
      "sprint": 9,
      "title": "Command Registry",
      "description": "Registered commands with shortcuts and categories",
      "acceptanceCriteria": [
        "Command registry: registerCommand, getCommands, executeCommand",
        "Action commands: create nodes, switch view, export, toggle dark mode",
        "Navigation commands: recent nodes, project switching, settings",
        "Command categories: Navigation, Create, View, Actions groups",
        "Keyboard shortcut display with platform-aware symbols (âŒ˜ Mac, Ctrl Windows)",
        "Filter commands: filter by type, tag, status via command"
      ]
    },
    {
      "id": "10.1",
      "sprint": 10,
      "title": "Accessibility Audit & Fixes",
      "description": "WCAG 2.1 compliance verification and fixes",
      "tools": ["/rams", "/playwright"],
      "acceptanceCriteria": [
        "axe-core audit completed on all views",
        "Screen reader testing documented (VoiceOver, NVDA)",
        "All features accessible via keyboard",
        "Heading hierarchy correct (h1 -> h2 -> h3, no skips)",
        "Form labels correct (htmlFor or wrapping)",
        "Focus management logical (order, return focus)",
        "ARIA labels on icon buttons, landmarks, busy states",
        "focus-visible styles visible on Tab, not on click",
        "Color contrast meets 4.5:1 text, 3:1 UI",
        "Error messages use aria-describedby, aria-invalid",
        "44x44px minimum touch targets verified",
        "Lighthouse score >= 90"
      ]
    },
    {
      "id": "10.2",
      "sprint": 10,
      "title": "Dark Mode",
      "description": "Dark theme with system preference",
      "tools": ["/frontend-design"],
      "acceptanceCriteria": [
        "Dark mode theme using Tailwind dark: prefix",
        "All components visible in dark mode",
        "Dark mode toggle with color-scheme, theme-color meta",
        "Preference stored in localStorage and respects system preference"
      ]
    },
    {
      "id": "10.3",
      "sprint": 10,
      "title": "Reduced Motion & Loading States",
      "description": "Motion preferences and loading UI",
      "tools": ["/frontend-design", "/rams"],
      "acceptanceCriteria": [
        "prefers-reduced-motion disables animations",
        "Loading states use structural skeletons with aria-busy"
      ]
    },
    {
      "id": "10.4",
      "sprint": 10,
      "title": "Onboarding & Help",
      "description": "First-run experience and keyboard shortcuts reference",
      "tools": ["/frontend-design"],
      "acceptanceCriteria": [
        "First-run welcome dialog with quick tips for new users",
        "Keyboard shortcuts reference accessible via ? shortcut"
      ]
    },
    {
      "id": "10.5",
      "sprint": 10,
      "title": "Browser Testing",
      "description": "Verify core functionality in browsers using Playwright",
      "tools": ["/playwright"],
      "acceptanceCriteria": ["Core functionality works in Chrome"]
    },
    {
      "id": "10.6",
      "sprint": 10,
      "title": "Cross-Browser Testing",
      "description": "Verify core functionality across browsers",
      "tools": ["/playwright"],
      "acceptanceCriteria": [
        "Core functionality works in Chrome, Firefox, Safari, Edge"
      ]
    },
    {
      "id": "11.1",
      "sprint": 11,
      "title": "Workspace Management",
      "description": "Multi-project workspace with quick switching for users working on multiple projects simultaneously",
      "tools": ["/frontend-design"],
      "acceptanceCriteria": [
        "Workspace loader reads .forge/config.json, handles missing/corrupted config",
        "ProjectSwitcher dropdown with project list, active indicator, search/filter",
        "Quick project switcher via Cmd+Shift+P (similar to Cmd+K palette style)",
        "Quick switcher shows recent projects first, supports fuzzy search",
        "Cross-project quick capture: create node dialog allows selecting target project",
        "Quick note to any project without fully switching context",
        "Persistent project list visible in sidebar with one-click switching",
        "Visual indicator of which project is currently active",
        "CreateProjectDialog with name input, folder selection, initialize structure",
        "Project settings panel: edit name/description, delete with confirmation",
        "Remember last active project on app restart"
      ]
    },
    {
      "id": "11.2",
      "sprint": 11,
      "title": "Git Integration",
      "description": "Git status and optional auto-commit",
      "tools": ["/frontend-design"],
      "acceptanceCriteria": [
        "Git status detection: repo, branch name, uncommitted changes",
        "Git status indicator: branch name, changes count, clean/dirty icon",
        "Auto-commit on save (optional setting): stage + commit when enabled",
        "Git settings UI: toggle auto-commit, view commits, manual commit"
      ]
    },
    {
      "id": "12.1",
      "sprint": 12,
      "title": "Production Build",
      "description": "Vite production build with configurable base path for Home Assistant deployment",
      "acceptanceCriteria": [
        "npm run build:prod generates optimized static files in dist/",
        "Configurable base path via VITE_BASE_PATH environment variable",
        "All assets use relative paths or respect base path",
        "Build output includes version.json with build timestamp and git hash"
      ]
    },
    {
      "id": "12.2",
      "sprint": 12,
      "title": "Express File Server",
      "description": "Minimal Node.js Express server to serve static files and provide REST API for file operations",
      "acceptanceCriteria": [
        "Express server serves static files from dist/",
        "REST API endpoints: GET/PUT/DELETE /api/files/:path",
        "Directory listing endpoint: GET /api/files/:path?list=true",
        "Health check endpoint: GET /api/health",
        "ServerFileSystemAdapter implements FileSystemAdapter interface",
        "CORS configured for Tailscale hostnames (*.ts.net)"
      ]
    },
    {
      "id": "12.3",
      "sprint": 12,
      "title": "Home Assistant Add-on",
      "description": "Package Forge as a Home Assistant add-on with persistent storage and Ingress support",
      "acceptanceCriteria": [
        "Add-on config.yaml with name, version, ports, options",
        "Dockerfile builds Node.js server with static files",
        "Data stored in /data (persistent across add-on updates)",
        "Ingress support for seamless HA sidebar integration",
        "README with manual installation instructions"
      ]
    },
    {
      "id": "12.4",
      "sprint": 12,
      "title": "Tailscale CORS Configuration",
      "description": "Configure CORS for Tailscale access from Mac and iPhone",
      "acceptanceCriteria": [
        "TAILSCALE_HOSTNAME environment variable for CORS whitelist",
        "CORS allows requests from *.ts.net domains",
        "Works with existing Tailscale setup on Home Assistant Green",
        "Accessible from MacBook and iPhone via MagicDNS"
      ]
    },
    {
      "id": "10.7",
      "sprint": 10,
      "title": "Fix CodeMirror Accessibility - ARIA Label",
      "description": "CodeMirror's internal .cm-content element has role='textbox' but no accessible name. Need to pass aria-label through to the CodeMirror component.",
      "tools": ["playwright", "rams"],
      "acceptanceCriteria": [
        "CodeMirror .cm-content element has aria-label attribute",
        "axe-core aria-input-field-name violation resolved",
        "e2e/accessibility.spec.ts:144 test passes"
      ]
    },
    {
      "id": "10.8",
      "sprint": 10,
      "title": "Fix Color Contrast - SaveIndicator Unsaved State",
      "description": "The 'Unsaved changes' text uses text-yellow-600 (#d08700) which has contrast ratio 2.93 against white. WCAG requires 4.5:1 minimum.",
      "tools": ["playwright", "rams"],
      "acceptanceCriteria": [
        "Unsaved changes text meets 4.5:1 contrast ratio",
        "Use text-amber-700 or darker yellow shade",
        "Visual distinction still clear between states",
        "axe-core color-contrast violation resolved"
      ]
    },
    {
      "id": "10.9",
      "sprint": 10,
      "title": "Fix Color Contrast - CodeMirror Placeholder",
      "description": "CodeMirror placeholder text (#888888 on #f9fafb) has contrast ratio 3.39. WCAG requires 4.5:1 minimum for text.",
      "tools": ["playwright", "rams"],
      "acceptanceCriteria": [
        "CodeMirror placeholder meets 4.5:1 contrast ratio",
        "Placeholder color adjusted in editor theme",
        "Still visually distinct as placeholder",
        "axe-core color-contrast violation resolved"
      ]
    },
    {
      "id": "10.10",
      "sprint": 10,
      "title": "Fix Command Palette Focus Trapping",
      "description": "Command palette dialog has focus trapping issues - Tab key navigation escapes the dialog in some scenarios.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Focus remains trapped within command palette when open",
        "Tab cycles through search input and results only",
        "Shift+Tab cycles backwards correctly",
        "e2e/command-palette.spec.ts:227 test passes"
      ]
    },
    {
      "id": "10.11",
      "sprint": 10,
      "title": "Fix Command Palette Click-Outside Behavior",
      "description": "Command palette should close when clicking outside, but e2e test is timing out. May need backdrop click handling fix.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Clicking outside command palette closes it",
        "Backdrop properly handles click events",
        "e2e/command-palette.spec.ts:36 test passes"
      ]
    },
    {
      "id": "10.12",
      "sprint": 10,
      "title": "Fix Mobile Sidebar Tests",
      "description": "Multiple mobile sidebar tests are timing out - hamburger menu button visibility, sidebar open/close on mobile viewport.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Hamburger menu button visible on mobile viewport",
        "Click hamburger opens sidebar with animation",
        "Close button closes sidebar on mobile",
        "Backdrop click closes sidebar",
        "e2e/sidebar.spec.ts mobile tests pass"
      ]
    },
    {
      "id": "10.13",
      "sprint": 10,
      "title": "Fix Keyboard Navigation - Detail Panel Escape",
      "description": "Escape key should close detail panel but test is timing out. May need keyboard event handler fix.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Escape key closes detail panel when focused",
        "Focus returns to previously focused element",
        "e2e/keyboard-navigation.spec.ts:285 test passes"
      ]
    },
    {
      "id": "10.14",
      "sprint": 10,
      "title": "Fix Keyboard Navigation - Checkbox Space Activation",
      "description": "Space key should toggle focused checkbox but test is timing out. May be issue with task checkbox component.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Space key toggles task status checkbox",
        "Visual feedback immediate on toggle",
        "e2e/keyboard-navigation.spec.ts:105 test passes"
      ]
    },
    {
      "id": "8.5",
      "sprint": 8,
      "title": "Implement Export/Import UI",
      "description": "Export and import functionality is missing. Tests show no export button accessible in UI, export dialog doesn't open, and import dialog is missing.",
      "tools": ["playwright", "frontend-design"],
      "acceptanceCriteria": [
        "Export button accessible in toolbar/menu",
        "Export dialog opens with format selection (JSON, Markdown, CSV)",
        "JSON export includes all node data and can be downloaded",
        "Markdown export preserves frontmatter and directory structure",
        "CSV export available for components with cost/supplier columns",
        "Import button accessible in toolbar/menu",
        "Import dialog opens with file picker and format auto-detection",
        "Import validates JSON structure before importing",
        "Import handles malformed markdown gracefully",
        "Conflict resolution options for existing nodes",
        "Drag and drop zone visible in import dialog",
        "Export/import dialogs are keyboard navigable",
        "Escape closes export/import dialogs",
        "e2e/import-export.spec.ts tests pass"
      ]
    },
    {
      "id": "7.5",
      "sprint": 7,
      "title": "Fix Decision Comparison Table Rendering",
      "description": "Decision comparison table tests are timing out - table may not be rendering or has different structure than expected.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Decision node detail panel shows comparison table section",
        "Comparison table shows options as columns",
        "Table renders within reasonable time (no timeout)",
        "e2e/decision-comparison.spec.ts:25 and :37 tests pass"
      ]
    },
    {
      "id": "5.6",
      "sprint": 5,
      "title": "Fix Graph View Zoom Out Button",
      "description": "Zoom out button does not decrease zoom level as expected. Test e2e/graph-view.spec.ts:243 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Zoom out button decreases graph zoom level",
        "Zoom level correctly reflects button clicks",
        "e2e/graph-view.spec.ts:243 test passes"
      ]
    },
    {
      "id": "5.7",
      "sprint": 5,
      "title": "Fix Graph View Minimap Toggle",
      "description": "Minimap toggle functionality not working. Test e2e/graph-view.spec.ts:367 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Minimap toggle button is visible",
        "Clicking toggle shows/hides minimap",
        "e2e/graph-view.spec.ts:367 test passes"
      ]
    },
    {
      "id": "5.8",
      "sprint": 5,
      "title": "Fix Graph View Edge Rendering",
      "description": "Edges connecting related nodes timing out. Test e2e/graph-view.spec.ts:323 fails with timeout.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Edges render between connected nodes",
        "Edge rendering completes within reasonable time",
        "e2e/graph-view.spec.ts:323 test passes"
      ]
    },
    {
      "id": "5.9",
      "sprint": 5,
      "title": "Fix Graph View Accessibility - Container Name",
      "description": "Graph container missing accessible name. Test e2e/graph-view.spec.ts:607 fails.",
      "tools": ["playwright", "rams"],
      "acceptanceCriteria": [
        "Graph container has aria-label or accessible name",
        "Screen readers can identify the graph region",
        "e2e/graph-view.spec.ts:607 test passes"
      ]
    },
    {
      "id": "5.10",
      "sprint": 5,
      "title": "Fix Graph View Context Menu Options",
      "description": "Context menu Edit and Delete options not found. Tests e2e/graph-view.spec.ts:418 and :429 fail with timeout.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Right-click on node shows context menu",
        "Context menu includes Edit option",
        "Context menu includes Delete option",
        "e2e/graph-view.spec.ts:418 and :429 tests pass"
      ]
    },
    {
      "id": "5.11",
      "sprint": 5,
      "title": "Fix Graph View Escape Key Behavior",
      "description": "Escape key does not deselect node in graph view. Test e2e/graph-view.spec.ts:489 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Pressing Escape key deselects currently selected node",
        "Graph view handles keyboard events correctly",
        "e2e/graph-view.spec.ts:489 test passes"
      ]
    },
    {
      "id": "5.12",
      "sprint": 5,
      "title": "Fix Graph View Node Position Persistence",
      "description": "Node positions don't persist after view switch. Test e2e/graph-view.spec.ts:169 fails with timeout.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Dragged node positions are saved",
        "Switching to outline and back preserves positions",
        "Positions stored in project metadata",
        "e2e/graph-view.spec.ts:169 test passes"
      ]
    },
    {
      "id": "6.6",
      "sprint": 6,
      "title": "Fix Dependency Link Click Navigation",
      "description": "Dependency links in task detail are not clickable to navigate. Test e2e/dependencies.spec.ts:51 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Dependency chip/link is clickable",
        "Clicking navigates to the dependent node",
        "e2e/dependencies.spec.ts:51 test passes"
      ]
    },
    {
      "id": "3.7",
      "sprint": 3,
      "title": "Fix Outline Status Cycling Button",
      "description": "Status cycling button (pending -> in_progress -> complete) not found in outline view. Test e2e/outline-features.spec.ts:278 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Task nodes in outline have status toggle button",
        "Clicking cycles through pending -> in_progress -> complete",
        "Visual feedback shows current status",
        "e2e/outline-features.spec.ts:278 test passes"
      ]
    },
    {
      "id": "3.8",
      "sprint": 3,
      "title": "Fix Outline Arrow Key Navigation",
      "description": "Arrow up/down keys don't navigate between nodes in outline view. Test e2e/outline-features.spec.ts:334 fails.",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Arrow down moves focus to next node",
        "Arrow up moves focus to previous node",
        "Focus indicator visible on focused node",
        "e2e/outline-features.spec.ts:334 test passes"
      ]
    },
    {
      "id": "E2E.1",
      "sprint": 10,
      "title": "E2E Test Coverage Gaps - Comprehensive",
      "description": "This task tracks all features that should have E2E Playwright tests but currently lack coverage. Tests should be created in e2e/ directory.",
      "tools": ["playwright"],
      "sections": [
        {
          "name": "Toast Notifications (0.10)",
          "file": "e2e/toast-notifications.spec.ts",
          "tests": [
            "Toast appears on successful action",
            "Toast auto-dismisses after timeout",
            "Success variant styled correctly (green)",
            "Error variant styled correctly (red)",
            "Info variant styled correctly (blue)",
            "Undo variant has clickable undo button",
            "Multiple toasts stack correctly",
            "Toast has proper ARIA role='status'"
          ]
        },
        {
          "name": "Error Boundaries (0.9)",
          "file": "e2e/error-boundaries.spec.ts",
          "tests": [
            "Error boundary catches render error and shows fallback",
            "Fallback UI displays error message",
            "Sidebar error doesn't crash main content",
            "Editor error doesn't crash sidebar",
            "Error is logged to console"
          ]
        },
        {
          "name": "List Virtualization (3.6)",
          "file": "e2e/performance.spec.ts",
          "tests": [
            "Node list virtualizes with 200+ items",
            "Scrolling through virtualized list is smooth",
            "No frame drops when scrolling large lists",
            "Virtualized items render correctly on scroll"
          ]
        },
        {
          "name": "Breadcrumbs Navigation (3.5)",
          "file": "e2e/breadcrumbs.spec.ts",
          "tests": [
            "Breadcrumbs show Project > Node Type > Node",
            "Clicking project segment navigates to project root",
            "Clicking node type segment filters to that type",
            "Breadcrumbs update when node is selected",
            "Breadcrumbs are keyboard accessible"
          ]
        },
        {
          "name": "Browser History Navigation (3.5)",
          "file": "e2e/browser-navigation.spec.ts",
          "tests": [
            "Browser back button navigates to previous node",
            "Browser forward button navigates forward",
            "Deep link URL loads correct node on page load",
            "Filter state persists in URL across page reload"
          ]
        },
        {
          "name": "Auto Layout (5.4)",
          "file": "e2e/graph-layout.spec.ts",
          "tests": [
            "Reset Layout button is visible in graph view",
            "Clicking Reset Layout repositions all nodes",
            "Layout respects DAG hierarchy",
            "Layout animation respects reduced motion"
          ]
        },
        {
          "name": "Templates (7.4)",
          "file": "e2e/templates.spec.ts",
          "tests": [
            "Template dropdown appears in create node dialog",
            "Selecting template pre-fills node content",
            "Component Selection template available for decisions",
            "Design Choice template available for decisions",
            "Vendor Selection template available for decisions",
            "Template manager accessible from settings",
            "Can create new template from existing node",
            "Can edit template name and content",
            "Can delete template with confirmation",
            "Can duplicate existing template"
          ]
        },
        {
          "name": "Full-Text Search (9.2)",
          "file": "e2e/full-text-search.spec.ts",
          "tests": [
            "Search indexes node titles",
            "Search indexes node body content",
            "Search results show context snippet",
            "Matched characters are highlighted in results",
            "Search updates when node content changes",
            "Empty search shows recent/all nodes"
          ]
        },
        {
          "name": "Command Categories (9.3)",
          "file": "e2e/command-categories.spec.ts",
          "tests": [
            "Commands grouped by category (Navigation, Create, View, Actions)",
            "Filter commands available (filter by type, tag, status)",
            "Platform-aware shortcut display (âŒ˜ on Mac, Ctrl on Windows)",
            "Recent commands show when query empty",
            "Recent commands persist across sessions"
          ]
        },
        {
          "name": "Dark Mode (10.2)",
          "file": "e2e/dark-mode.spec.ts",
          "tests": [
            "Dark mode toggle is accessible",
            "Clicking toggle switches theme",
            "Dark mode preference persists in localStorage",
            "System preference is respected on first load",
            "All components visible in dark mode",
            "Color contrast meets WCAG in dark mode",
            "Theme-color meta tag updates with theme"
          ]
        },
        {
          "name": "Loading States (10.3)",
          "file": "e2e/loading-states.spec.ts",
          "tests": [
            "Skeleton loaders show during project load",
            "Skeletons have aria-busy attribute",
            "Loading state respects reduced motion",
            "Content replaces skeleton after load"
          ]
        },
        {
          "name": "Onboarding & Help (10.4)",
          "file": "e2e/onboarding.spec.ts",
          "tests": [
            "First-run welcome dialog appears for new users",
            "Welcome dialog has quick tips",
            "Welcome dialog can be dismissed",
            "Welcome dialog doesn't show on subsequent visits",
            "? shortcut opens keyboard shortcuts reference",
            "Shortcuts reference lists all keyboard shortcuts",
            "Shortcuts reference is searchable",
            "Shortcuts reference dialog is keyboard accessible"
          ]
        },
        {
          "name": "Workspace Management (11.1)",
          "file": "e2e/workspace-management.spec.ts",
          "tests": [
            "Project switcher dropdown visible in sidebar",
            "Project switcher shows list of projects",
            "Active project has visual indicator",
            "Can search/filter projects in switcher",
            "Selecting project switches workspace",
            "Create project dialog initializes folder structure",
            "Project settings panel accessible",
            "Can edit project name and description",
            "Can delete project with confirmation",
            "Handles missing/corrupted workspace config"
          ]
        },
        {
          "name": "Git Integration (11.2)",
          "file": "e2e/git-integration.spec.ts",
          "tests": [
            "Git status indicator shows branch name",
            "Git status shows uncommitted changes count",
            "Clean/dirty icon reflects repo state",
            "Auto-commit toggle in git settings",
            "Enabling auto-commit commits on save",
            "Can view recent commits",
            "Can trigger manual commit"
          ]
        }
      ],
      "acceptanceCriteria": [
        "All listed test files created in e2e/ directory",
        "Each test file covers all listed test cases",
        "Tests use Playwright best practices (locators, assertions)",
        "Tests are independent and can run in isolation",
        "Tests pass in CI pipeline"
      ]
    },
    {
      "id": "13.1",
      "sprint": 13,
      "title": "Container Node Type System",
      "description": "Add Subsystem, Assembly, and Module node types with shared structure for organizing large-scale project parts",
      "acceptanceCriteria": [
        "NodeType enum extended: subsystem, assembly, module",
        "SubsystemNode extends BaseNode with status, description, requirements (optional string[])",
        "AssemblyNode extends BaseNode with status, description, requirements (optional string[])",
        "ModuleNode extends BaseNode with status, description, requirements (optional string[])",
        "Type guards: isSubsystemNode(), isAssemblyNode(), isModuleNode(), isContainerNode()",
        "Container status options: planning, in_progress, complete, on_hold",
        "ForgeNode discriminated union updated to include all seven node types"
      ]
    },
    {
      "id": "13.2",
      "sprint": 13,
      "title": "Parent Linking Field",
      "description": "Add optional parent field to Task, Component, Decision, and Note nodes for linking to container nodes",
      "acceptanceCriteria": [
        "Optional parent field added to TaskNode, ComponentNode, DecisionNode, NoteNode types",
        "parent field accepts id of any Subsystem, Assembly, or Module node",
        "Zod schemas updated to validate parent references",
        "YAML frontmatter supports parent: container-id syntax",
        "Validation warns if parent references non-existent or non-container node"
      ]
    },
    {
      "id": "13.3",
      "sprint": 13,
      "title": "Container Node File System",
      "description": "Add file system support for container node types",
      "acceptanceCriteria": [
        "New directories: subsystems/, assemblies/, modules/ in project structure",
        "loadProject() scans all seven node type directories",
        "saveNode() correctly routes container nodes to their directories",
        "Sample fixtures include at least one of each container type"
      ]
    },
    {
      "id": "13.4",
      "sprint": 13,
      "title": "Container Node CRUD & Store",
      "description": "Extend nodes store with container node operations and child lookups",
      "acceptanceCriteria": [
        "useNodesStore supports add/update/delete for container nodes",
        "getNodesByType() works for subsystem, assembly, module types",
        "getChildNodes(containerId) returns all nodes with matching parent field",
        "Container node deletion warns about orphaned child references",
        "Quick create buttons for + Subsystem, + Assembly, + Module in sidebar"
      ]
    },
    {
      "id": "13.5",
      "sprint": 13,
      "title": "Container Node Detail Panel",
      "description": "Detail panel for viewing and editing container nodes",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "ContainerDetailPanel renders for Subsystem, Assembly, Module nodes",
        "Shows title, status, description fields",
        "Requirements displayed as editable list (add/remove/reorder)",
        "Child nodes section shows linked tasks, components, decisions, notes",
        "Child nodes grouped by type with counts",
        "Click child node navigates to it"
      ]
    },
    {
      "id": "13.6",
      "sprint": 13,
      "title": "Parent Selector UI",
      "description": "UI for assigning and changing parent on child nodes",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "ParentSelector dropdown in Task, Component, Decision, Note detail panels",
        "Dropdown shows all container nodes grouped by type",
        "Search/filter within dropdown",
        "Clear button to remove parent assignment",
        "Shows current parent with type badge and link to navigate"
      ]
    },
    {
      "id": "13.7",
      "sprint": 13,
      "title": "Container Filtering & Outline",
      "description": "Filter and group nodes by container in outline view",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "ContainerFilter in sidebar filters to show only nodes under selected container",
        "Outline view can group by container (alternative to grouping by type)",
        "Container sections collapsible with node counts",
        "Nodes without parent shown in 'Unassigned' section",
        "URL state includes container filter (?container=cannon-subsystem)"
      ]
    },
    {
      "id": "13.8",
      "sprint": 13,
      "title": "Container Nodes in Graph View",
      "description": "Display container nodes and parent relationships in graph",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Container nodes render with distinct visual style (larger, different shape or border)",
        "Parent-child edges shown as containment lines (different from dependency/reference)",
        "Filter graph to show only nodes within a container",
        "Container node context menu includes 'Show Children Only' option",
        "Graph layout respects container grouping (children clustered near parent)"
      ]
    },
    {
      "id": "14.1",
      "sprint": 14,
      "title": "IndexedDB Storage Layer",
      "description": "Implement IndexedDB adapter as primary persistence layer using idb library for cleaner async/await API",
      "acceptanceCriteria": [
        "idb package installed (lightweight IndexedDB wrapper)",
        "IndexedDBAdapter implements FileSystemAdapter interface",
        "Database schema: projects store (id, name, metadata), nodes store (id, projectId, type, data)",
        "CRUD operations: readFile, writeFile, deleteFile, listDirectory map to IndexedDB operations",
        "Data persists across browser sessions and page reloads",
        "Database versioning supports schema migrations",
        "Unit tests verify persistence across simulated page reloads"
      ]
    },
    {
      "id": "14.2",
      "sprint": 14,
      "title": "Directory Handle Persistence",
      "description": "Store File System Access API directory handles in IndexedDB for automatic reconnection",
      "acceptanceCriteria": [
        "Directory handles stored in IndexedDB when user selects folder",
        "On app load, attempt to retrieve stored handle and request permission",
        "If permission granted, automatically reconnect to file system",
        "If permission denied or handle invalid, show reconnect prompt",
        "Handle storage includes project path and last sync timestamp",
        "Clear stored handle when user explicitly closes project"
      ]
    },
    {
      "id": "14.3",
      "sprint": 14,
      "title": "Sync Service Architecture",
      "description": "Create bidirectional sync service that coordinates between IndexedDB and file system",
      "acceptanceCriteria": [
        "SyncService class manages sync state and operations",
        "Sync modes: 'idle', 'syncing', 'error', 'disconnected'",
        "syncToFileSystem(nodes) writes IndexedDB state to file system",
        "syncFromFileSystem() reads file system into IndexedDB",
        "Sync operations are atomic (all-or-nothing per node)",
        "Sync errors don't corrupt either data source",
        "Sync service exposes observable state for UI binding"
      ]
    },
    {
      "id": "14.4",
      "sprint": 14,
      "title": "Change Tracking & Dirty Detection",
      "description": "Track changes in both IndexedDB and file system to enable smart sync",
      "acceptanceCriteria": [
        "Each node stores lastModified timestamp in IndexedDB",
        "Each node stores lastSyncedAt timestamp (when last written to file system)",
        "Dirty detection: node is dirty if lastModified > lastSyncedAt",
        "File system watcher detects external changes (if browser supports)",
        "External changes marked with externallyModified flag",
        "Change tracking persists across page reloads"
      ]
    },
    {
      "id": "14.5",
      "sprint": 14,
      "title": "Conflict Detection & Resolution",
      "description": "Detect and resolve conflicts when both IndexedDB and file system have changes",
      "acceptanceCriteria": [
        "Conflict detected when: IndexedDB dirty AND file system modified since last sync",
        "ConflictResolutionDialog shows both versions with diff view",
        "Resolution options: 'Keep Local', 'Keep External', 'Merge' (manual)",
        "Merge option opens side-by-side editor for manual resolution",
        "Resolution choice can be applied to all similar conflicts",
        "Conflict history logged for debugging"
      ]
    },
    {
      "id": "14.6",
      "sprint": 14,
      "title": "Sync Status UI",
      "description": "Visual indicators for sync status throughout the app",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "SyncStatusIndicator in header/toolbar shows current sync state",
        "States: 'Synced' (green check), 'Syncing' (spinner), 'Offline' (gray), 'Error' (red)",
        "Clicking indicator opens sync details popover",
        "Popover shows: last sync time, pending changes count, connection status",
        "Manual 'Sync Now' button triggers immediate sync",
        "'Reconnect' button appears when disconnected from file system",
        "Toast notifications for sync success/failure"
      ]
    },
    {
      "id": "14.7",
      "sprint": 14,
      "title": "Automatic Sync Strategy",
      "description": "Implement configurable automatic sync behavior",
      "acceptanceCriteria": [
        "Sync triggers: on save (debounced), on app focus, on manual request",
        "Configurable sync interval for background sync (default: 30 seconds when idle)",
        "Sync pauses when app is in background (Page Visibility API)",
        "Sync resumes when app regains focus",
        "Settings UI for sync preferences: auto-sync on/off, sync interval",
        "Offline mode: continue working, queue changes, sync when reconnected"
      ]
    },
    {
      "id": "14.8",
      "sprint": 14,
      "title": "Store Migration & Initialization",
      "description": "Update Zustand stores to use IndexedDB as primary source with file system as secondary",
      "acceptanceCriteria": [
        "useNodesStore initializes from IndexedDB on app load (fast)",
        "File system sync happens in background after initial load",
        "useProjectStore tracks both IndexedDB and file system connection state",
        "First-time setup: if IndexedDB empty but file system has data, import",
        "Migration path: existing BrowserFileSystemAdapter users get data imported to IndexedDB",
        "Clear IndexedDB option in settings for troubleshooting"
      ]
    },
    {
      "id": "14.9",
      "sprint": 14,
      "title": "Reconnection Flow UX",
      "description": "Smooth user experience for reconnecting to file system after page reload",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "On reload: app loads instantly from IndexedDB, shows 'Reconnecting...' status",
        "Browser permission prompt appears for stored directory handle",
        "If user grants permission: sync status updates, sync begins automatically",
        "If user denies permission: show 'Offline Mode' banner with 'Reconnect' button",
        "Reconnect button re-prompts for directory selection",
        "Data never lost: IndexedDB always has the latest state"
      ]
    },
    {
      "id": "14.10",
      "sprint": 14,
      "title": "E2E Tests for Hybrid Persistence",
      "description": "End-to-end tests verifying persistence and sync behavior",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Test: data persists in IndexedDB after page reload",
        "Test: app loads data from IndexedDB without file system access",
        "Test: sync indicator shows correct state",
        "Test: manual sync button triggers sync",
        "Test: conflict dialog appears for conflicting changes",
        "Test: offline mode allows continued editing",
        "Test: reconnection flow works after permission re-grant"
      ]
    },
    {
      "id": "15.1",
      "sprint": 15,
      "title": "Supplier Link Parser Service",
      "description": "Parse product links from Amazon, DigiKey, Mouser, and other suppliers to extract component metadata automatically",
      "acceptanceCriteria": [
        "SupplierLinkParser service with parseLink(url) method",
        "Supported suppliers: Amazon, DigiKey, Mouser, LCSC, McMaster-Carr",
        "Extracts: title, price, part number, manufacturer, description, image URL",
        "Uses URL patterns to identify supplier type",
        "Fetches page metadata via proxy/CORS-friendly approach",
        "Falls back to Open Graph / meta tags when structured data unavailable",
        "Returns PartialComponentData with extracted fields",
        "Handles rate limiting and errors gracefully",
        "Unit tests with mocked responses for each supplier"
      ]
    },
    {
      "id": "15.2",
      "sprint": 15,
      "title": "Link Paste Auto-Import UI",
      "description": "Paste a supplier link to auto-create or update a component node with extracted data",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Paste detection in component creation dialog (Ctrl/Cmd+V with URL)",
        "'Import from Link' button opens link input field",
        "Loading spinner while fetching/parsing link",
        "Preview of extracted data before confirming import",
        "User can edit/override any extracted fields",
        "Creates new ComponentNode with populated fields on confirm",
        "Supplier link stored in component's 'supplier_url' field",
        "Toast notification on successful import",
        "Error handling for unsupported URLs or failed fetches",
        "'Re-import' action on existing components to refresh data from link"
      ]
    },
    {
      "id": "15.3",
      "sprint": 15,
      "title": "PDF Attachment Storage",
      "description": "File storage system for attaching PDFs and other documents to nodes",
      "acceptanceCriteria": [
        "Attachments stored in project_root/attachments/{node-id}/ directory",
        "FileSystemAdapter extended with copyFile, deleteFile for binary files",
        "Attachment metadata stored in node frontmatter: attachments: [{name, path, type, size, addedAt}]",
        "Maximum file size limit configurable (default 50MB)",
        "Supported types: PDF, images (PNG, JPG, SVG), text files",
        "Attachments synced with IndexedDB for offline access (Sprint 14 integration)",
        "Cleanup: delete attachment files when node is deleted"
      ]
    },
    {
      "id": "15.4",
      "sprint": 15,
      "title": "Datasheet Attachment UI",
      "description": "UI for attaching, viewing, and managing PDF datasheets on component nodes",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "AttachmentsPanel in component detail view",
        "Drag-and-drop zone for adding attachments",
        "File picker button as alternative to drag-drop",
        "Attachment list shows: filename, size, date added, delete button",
        "Click attachment to open in new tab or inline viewer",
        "Inline PDF viewer using browser's native PDF support or pdf.js",
        "Image attachments show thumbnail preview",
        "Download button for each attachment",
        "Confirm dialog before deleting attachment",
        "Keyboard accessible: Tab through attachments, Enter to open, Delete to remove"
      ]
    },
    {
      "id": "15.5",
      "sprint": 15,
      "title": "Graph Auto-Layout on Link Changes",
      "description": "Automatically trigger graph re-layout when links or dependencies change",
      "acceptanceCriteria": [
        "Graph layout recalculates when: node added, node deleted, link created, link removed",
        "Layout animation smoothly transitions nodes to new positions",
        "Debounce layout recalculation (500ms) for rapid changes",
        "Option to disable auto-layout in graph settings",
        "Manual 'Re-layout' button always available",
        "Preserve user-pinned node positions (nodes manually dragged don't auto-move)",
        "Node pinning: double-click to pin/unpin, visual indicator for pinned nodes",
        "Layout algorithm respects existing clusters/groups",
        "Animation respects prefers-reduced-motion"
      ]
    },
    {
      "id": "15.6",
      "sprint": 15,
      "title": "Forge MCP Server - Core Infrastructure",
      "description": "MCP server that exposes Forge project operations to AI agents like Claude Code",
      "acceptanceCriteria": [
        "Node.js MCP server package in packages/forge-mcp-server/",
        "Connects to Forge project directory via file system",
        "MCP resources: list projects, get project metadata, list nodes",
        "MCP tools: create_node, update_node, delete_node, search_nodes",
        "Tool parameters validated with Zod schemas",
        "Returns structured JSON responses suitable for LLM consumption",
        "Error responses include actionable error messages",
        "Server configuration via environment variables or config file",
        "README with installation and Claude Code integration instructions"
      ]
    },
    {
      "id": "15.7",
      "sprint": 15,
      "title": "Forge MCP Server - Advanced Operations",
      "description": "Extended MCP tools for project management and component sourcing",
      "acceptanceCriteria": [
        "create_project tool: initialize new project with directory structure",
        "link_nodes tool: create wiki-link or dependency between nodes",
        "unlink_nodes tool: remove link between nodes",
        "add_dependency tool: add task dependency with cycle detection",
        "import_from_link tool: fetch supplier URL and create component",
        "find_components tool: search for components by criteria (type, tags, status)",
        "get_blocked_tasks tool: return tasks blocked by incomplete dependencies",
        "get_critical_path tool: return critical path through project tasks",
        "bulk_update tool: update multiple nodes with same field changes"
      ]
    },
    {
      "id": "15.8",
      "sprint": 15,
      "title": "Forge MCP Server - Prompts & Context",
      "description": "MCP prompts for common AI-assisted workflows",
      "acceptanceCriteria": [
        "MCP prompt: 'plan_subsystem' - guide AI to create subsystem with components and tasks",
        "MCP prompt: 'source_components' - guide AI to find and import components for requirements",
        "MCP prompt: 'review_dependencies' - analyze task dependencies and suggest improvements",
        "MCP prompt: 'project_status' - summarize project state, blocked items, critical path",
        "Prompts include relevant context from project data",
        "Prompts return structured guidance for AI to follow",
        "Documentation for each prompt with example interactions"
      ]
    },
    {
      "id": "15.9",
      "sprint": 15,
      "title": "Fix Project Switching",
      "description": "Project switcher dropdown selects but doesn't actually switch the active project",
      "acceptanceCriteria": [
        "Clicking project in switcher dropdown loads that project's data",
        "Active project indicator updates to selected project",
        "Node list refreshes to show new project's nodes",
        "URL updates to reflect new project context",
        "Unsaved changes prompt appears if switching with dirty state",
        "Graph view resets/reloads for new project",
        "Recently active project stored for 'Recent Projects' list"
      ]
    },
    {
      "id": "15.10",
      "sprint": 15,
      "title": "Image Attachments with Annotation",
      "description": "Extend attachment system to support images (photos, screenshots, sketches) with optional annotation capabilities for hardware project documentation",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Image types supported: PNG, JPG, JPEG, GIF, SVG, WebP",
        "Drag-drop or file picker to attach images to any node",
        "Thumbnail preview in attachments panel (max 200px)",
        "Click thumbnail to open full-size viewer overlay",
        "Viewer supports zoom, pan, and download",
        "Optional annotation layer: draw arrows, circles, text labels",
        "Annotations saved as separate JSON file alongside image",
        "Annotations rendered on thumbnail and full view",
        "Paste from clipboard (Cmd/Ctrl+V) to attach screenshot",
        "Image attachments synced with IndexedDB for offline access",
        "Lazy loading for nodes with many image attachments"
      ]
    },
    {
      "id": "15.11",
      "sprint": 15,
      "title": "Quick Capture Notes",
      "description": "Fast note-taking system for capturing ideas without leaving current context, with optional triage workflow",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "Global hotkey Cmd/Ctrl+Shift+N opens quick capture modal",
        "Modal appears as floating overlay, doesn't navigate away from current view",
        "Single text input with placeholder 'Quick note...'",
        "Enter submits and closes, Escape cancels",
        "Creates NoteNode with title from first line, rest as content",
        "Optional: assign to container (Subsystem/Assembly/Module) via dropdown",
        "Optional: add tags via inline #tag syntax",
        "Quick capture notes tagged with 'inbox' by default for later triage",
        "Inbox filter in sidebar shows uncategorized quick notes",
        "Toast confirmation with 'View' action to navigate to created note",
        "Command palette integration: 'Quick Capture' command available",
        "Works from any view (outline, graph, detail panel)"
      ]
    },
    {
      "id": "15.12",
      "sprint": 15,
      "title": "Kanban View for Tasks",
      "description": "Visual board view organizing tasks by status columns with drag-and-drop status changes",
      "tools": ["frontend-design"],
      "acceptanceCriteria": [
        "New view option: Outline | Graph | Kanban in view toggle",
        "Keyboard shortcut Ctrl/Cmd+3 switches to Kanban view",
        "Columns for each task status: Pending, In Progress, Complete, On Hold",
        "Task cards show: title, priority badge, blocked indicator, tags",
        "Drag task card between columns to change status",
        "Drag within column to reorder (custom sort order)",
        "Column header shows task count",
        "Collapsed columns option for focus (e.g., hide Complete)",
        "Filter integration: type/tag/container filters apply to Kanban",
        "Click card to open detail panel (same as outline click)",
        "Quick actions on card hover: mark complete, edit, delete",
        "Swimlanes option: group rows by container or milestone",
        "Empty column shows drop zone with helpful text",
        "Keyboard accessible: arrow keys navigate cards, Enter opens detail",
        "Respects prefers-reduced-motion for drag animations"
      ]
    },
    {
      "id": "15.13",
      "sprint": 15,
      "title": "E2E Tests for Sprint 15 Features",
      "description": "End-to-end tests for component sourcing, attachments, quick capture, Kanban, and MCP integration",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Test: paste DigiKey link creates component with extracted data",
        "Test: import preview shows extracted fields before confirm",
        "Test: drag-drop PDF creates attachment on component",
        "Test: attachment list shows added files",
        "Test: clicking attachment opens viewer",
        "Test: deleting attachment removes from list and disk",
        "Test: adding link triggers graph re-layout",
        "Test: pinned nodes don't move during auto-layout",
        "Test: project switcher actually switches projects",
        "Test: switching projects with unsaved changes shows prompt",
        "Test: drag-drop image creates attachment with thumbnail",
        "Test: clicking image thumbnail opens full viewer",
        "Test: paste screenshot from clipboard creates attachment",
        "Test: image annotation tools appear in viewer",
        "Test: Cmd+Shift+N opens quick capture modal",
        "Test: submitting quick capture creates note with inbox tag",
        "Test: quick capture modal closes on Escape",
        "Test: Kanban view shows tasks in status columns",
        "Test: dragging task card between columns changes status",
        "Test: Kanban respects active filters",
        "Test: clicking Kanban card opens detail panel"
      ]
    },
    {
      "id": "16.1",
      "sprint": 16,
      "title": "Self-Hosted Proxy Server",
      "description": "Lightweight Express/Fastify proxy server for CORS handling, designed to run alongside Home Assistant. Handles supplier API calls and HTML scraping with credentials stored locally.",
      "acceptanceCriteria": [
        "Simple Node.js server (Express or Fastify) with minimal dependencies",
        "Runs on configurable port (default 3001) alongside Forge app",
        "Proxies GET requests to supplier APIs with proper headers",
        "Returns CORS headers allowing requests from Forge frontend",
        "Reads API credentials from environment variables or local config file",
        "Rate limiting to prevent accidental abuse (10 req/min per endpoint)",
        "Health check endpoint at /health returns 200 OK",
        "Docker container option for easy deployment on Home Assistant",
        "Startup script and systemd service file for non-Docker deployment",
        "README with Home Assistant add-on installation instructions"
      ]
    },
    {
      "id": "16.2",
      "sprint": 16,
      "title": "DigiKey API Integration",
      "description": "Integrate DigiKey's Product Information API for real-time component data. Requires OAuth2 client credentials flow.",
      "acceptanceCriteria": [
        "DigiKey OAuth2 token exchange via proxy server",
        "Product search endpoint: search by part number or keyword",
        "Product details endpoint: full specs, pricing, stock, datasheet URL",
        "Extracted data maps to ForgeNode component fields",
        "Token refresh happens automatically before expiry",
        "Graceful fallback to URL parsing if API unavailable",
        "API errors displayed to user with actionable message"
      ]
    },
    {
      "id": "16.3",
      "sprint": 16,
      "title": "Mouser API Integration",
      "description": "Integrate Mouser's Search API for component data. Uses simple API key authentication.",
      "acceptanceCriteria": [
        "Mouser API calls via proxy server with API key",
        "Search by part number returns matching products",
        "Product details include: description, manufacturer, price, stock, datasheet",
        "Extracted data maps to ForgeNode component fields",
        "Rate limiting respected (max 30 requests/minute)",
        "Graceful fallback to URL parsing if API unavailable"
      ]
    },
    {
      "id": "16.4",
      "sprint": 16,
      "title": "Adafruit Product Scraper",
      "description": "Scrape Adafruit product pages for component data since no public API exists. Parse HTML via proxy.",
      "acceptanceCriteria": [
        "Fetch Adafruit product page HTML via proxy",
        "Extract: title, description, price, stock status, images",
        "Parse Open Graph and JSON-LD structured data",
        "Handle product variations (size, color options)",
        "Graceful degradation if page structure changes",
        "Cache scraped data for 24 hours to reduce requests"
      ]
    },
    {
      "id": "16.5",
      "sprint": 16,
      "title": "LCSC Product Scraper",
      "description": "Scrape LCSC/EasyEDA product pages for component data. May use unofficial API endpoints discovered via network inspection.",
      "acceptanceCriteria": [
        "Fetch LCSC product data via proxy",
        "Extract: part number, description, manufacturer, price, stock, datasheet",
        "Handle LCSC part number format (C######)",
        "Parse component specifications table",
        "Graceful fallback if API/page structure changes"
      ]
    },
    {
      "id": "16.6",
      "sprint": 16,
      "title": "Amazon Link Parser Enhancement",
      "description": "Enhanced Amazon link parsing with better metadata extraction. Limited by Amazon's anti-scraping measures.",
      "acceptanceCriteria": [
        "Extract ASIN from various Amazon URL formats",
        "Attempt metadata fetch via proxy (may fail due to Amazon blocks)",
        "Graceful fallback to ASIN-only extraction",
        "Support for Amazon short links (amzn.to) via redirect following",
        "Display warning that Amazon data may be limited"
      ]
    },
    {
      "id": "16.7",
      "sprint": 16,
      "title": "API Credentials Settings UI",
      "description": "Settings panel for users to enter their DigiKey and Mouser API credentials.",
      "acceptanceCriteria": [
        "Settings page section for 'Supplier APIs'",
        "DigiKey: client ID and client secret fields",
        "Mouser: API key field",
        "Credentials stored securely in IndexedDB (encrypted at rest)",
        "'Test Connection' button validates credentials",
        "Success/error feedback for credential validation",
        "Clear explanation of how to obtain API keys (with links)"
      ]
    },
    {
      "id": "16.8",
      "sprint": 16,
      "title": "Enhanced Import Preview Dialog",
      "description": "Improved preview dialog showing all extracted data before creating a component node.",
      "acceptanceCriteria": [
        "Dialog shows extracted fields in organized sections",
        "Product image displayed if available",
        "Price and stock shown with timestamp",
        "Datasheet link clickable to preview",
        "User can edit any field before import",
        "Supplier source clearly indicated",
        "'Create Component' and 'Cancel' actions"
      ]
    },
    {
      "id": "16.9",
      "sprint": 16,
      "title": "E2E Tests for Sprint 16 Features",
      "description": "End-to-end tests for supplier API integrations and scrapers",
      "tools": ["playwright"],
      "acceptanceCriteria": [
        "Test: DigiKey link triggers API call and populates preview",
        "Test: Mouser link triggers API call and populates preview",
        "Test: Adafruit link scrapes page and shows preview",
        "Test: LCSC link scrapes page and shows preview",
        "Test: Amazon link extracts ASIN even if scraping fails",
        "Test: API credentials can be saved in settings",
        "Test: Test Connection button validates credentials",
        "Test: Import preview allows field editing before save",
        "Test: graceful degradation when proxy unavailable"
      ]
    }
  ],
  "technicalDecisions": {
    "packageVersions": {
      "react": "18.x",
      "typescript": "5.x",
      "vite": "5.x",
      "tailwindcss": "3.x",
      "tailwindcss-animate": "latest",
      "@base-ui-components/react": "pin exact version (alpha)",
      "zustand": "4.x",
      "nuqs": "2.x",
      "gray-matter": "latest",
      "zod": "3.x",
      "reactflow": "11.x",
      "elkjs": "latest",
      "codemirror": "6.x",
      "lucide-react": "latest"
    },
    "fileSystemStrategy": [
      "Primary: File System Access API (Chrome/Edge)",
      "Fallback: <input type='file' webkitdirectory> (Firefox/Safari)",
      "Future: Local server adapter for Electron/Tauri"
    ],
    "zIndexScale": {
      "Z_DROPDOWN": 10,
      "Z_STICKY": 20,
      "Z_MODAL": 30,
      "Z_POPOVER": 40,
      "Z_TOAST": 50,
      "Z_TOOLTIP": 60
    },
    "colorTokens": {
      "decision": {
        "lightBg": "blue-50",
        "darkBg": "blue-950",
        "accent": "blue-500"
      },
      "component": {
        "lightBg": "green-50",
        "darkBg": "green-950",
        "accent": "green-500"
      },
      "task": {
        "lightBg": "orange-50",
        "darkBg": "orange-950",
        "accent": "orange-500"
      },
      "note": {
        "lightBg": "gray-50",
        "darkBg": "gray-900",
        "accent": "gray-500"
      },
      "subsystem": {
        "lightBg": "purple-50",
        "darkBg": "purple-950",
        "accent": "purple-500"
      },
      "assembly": {
        "lightBg": "cyan-50",
        "darkBg": "cyan-950",
        "accent": "cyan-500"
      },
      "module": {
        "lightBg": "rose-50",
        "darkBg": "rose-950",
        "accent": "rose-500"
      }
    }
  },
  "references": {
    "sprintPlan": "SPRINT_PLAN.md",
    "spec": "spec.md",
    "progress": ".ralph/progress.md"
  }
}
